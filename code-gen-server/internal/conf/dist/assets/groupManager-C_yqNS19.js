import{b as J,d as Q,i as ye,p as be,ae as ge,r as V,w as Ce,v as Ve,u as T,e as I,a as R,o as v,f as U,l as z,m as B,g as o,V as ke,x as Ie,N as D,$ as C,a0 as K,D as l,j as a,h as E,k as Se,a5 as X,O as we,S as xe,U as Ee,q as he,t as Fe,af as q,ag as Y,P as G,a4 as O,ah as Z,n as De,ai as Ue,aj as Me,y as $e}from"./index-C1aDNhoF.js";import{U as ee,F as le,G as ae,H as te,E as oe,a as Ae,b as Be,c as Ke,d as Ne,e as ze,f as Pe,g as Re}from"./index-C2vceC4_.js";import{s as Te,k as L,_ as se,i as Ge,D as Oe,E as ne,x as j,j as de,y as P,g as ie}from"./_plugin-vue_export-helper-9B8IkehE.js";import{F as je,a as He,b as qe,A as Le,U as We,D as Je,c as Qe,S as Xe,d as Ye}from"./saveFileGenInfo-DbH5WkmY.js";import{b as Ze}from"./mappingApi-7N3ABS8W.js";import{E as el}from"./index-D4c9neSN.js";import"./databaseApi-BhEWAfJA.js";const W=i=>ye(i)||be(i)||ge(i),ll=J({accordion:Boolean,modelValue:{type:Q([Array,String,Number]),default:()=>Te([])}}),al={[ee]:W,[le]:W},ue=Symbol("collapseContextKey"),tl=(i,s)=>{const n=V(L(i.modelValue)),r=t=>{n.value=t;const p=i.accordion?n.value[0]:n.value;s(ee,p),s(le,p)},e=t=>{if(i.accordion)r([n.value[0]===t?"":t]);else{const p=[...n.value],c=p.indexOf(t);c>-1?p.splice(c,1):p.push(t),r(p)}};return Ce(()=>i.modelValue,()=>n.value=L(i.modelValue),{deep:!0}),Ve(ue,{activeNames:n,handleItemClick:e}),{activeNames:n,setActiveNames:r}},ol=()=>{const i=T("collapse");return{rootKls:I(()=>i.b())}},sl=R({name:"ElCollapse"}),nl=R({...sl,props:ll,emits:al,setup(i,{expose:s,emit:n}){const r=i,{activeNames:e,setActiveNames:t}=tl(r,n),{rootKls:p}=ol();return s({activeNames:e,setActiveNames:t}),(c,d)=>(v(),U("div",{class:B(o(p))},[z(c.$slots,"default")],2))}});var dl=se(nl,[["__file","collapse.vue"]]);const il=J({title:{type:String,default:""},name:{type:Q([String,Number]),default:void 0},icon:{type:Ge,default:ke},disabled:Boolean}),ul=i=>{const s=Ie(ue),{namespace:n}=T("collapse"),r=V(!1),e=V(!1),t=Oe(),p=I(()=>t.current++),c=I(()=>{var F;return(F=i.name)!=null?F:`${n.value}-id-${t.prefix}-${o(p)}`}),d=I(()=>s==null?void 0:s.activeNames.value.includes(o(c)));return{focusing:r,id:p,isActive:d,handleFocus:()=>{setTimeout(()=>{e.value?e.value=!1:r.value=!0},50)},handleHeaderClick:()=>{i.disabled||(s==null||s.handleItemClick(o(c)),r.value=!1,e.value=!0)},handleEnterClick:()=>{s==null||s.handleItemClick(o(c))}}},rl=(i,{focusing:s,isActive:n,id:r})=>{const e=T("collapse"),t=I(()=>[e.b("item"),e.is("active",o(n)),e.is("disabled",i.disabled)]),p=I(()=>[e.be("item","header"),e.is("active",o(n)),{focusing:o(s)&&!i.disabled}]),c=I(()=>[e.be("item","arrow"),e.is("active",o(n))]),d=I(()=>e.be("item","wrap")),S=I(()=>e.be("item","content")),g=I(()=>e.b(`content-${o(r)}`)),h=I(()=>e.b(`head-${o(r)}`));return{arrowKls:c,headKls:p,rootKls:t,itemWrapperKls:d,itemContentKls:S,scopedContentId:g,scopedHeadId:h}},cl=R({name:"ElCollapseItem"}),pl=R({...cl,props:il,setup(i,{expose:s}){const n=i,{focusing:r,id:e,isActive:t,handleFocus:p,handleHeaderClick:c,handleEnterClick:d}=ul(n),{arrowKls:S,headKls:g,rootKls:h,itemWrapperKls:F,itemContentKls:N,scopedContentId:y,scopedHeadId:f}=rl(n,{focusing:r,isActive:t,id:e});return s({isActive:t}),(w,M)=>(v(),U("div",{class:B(o(h))},[D("button",{id:o(f),class:B(o(g)),"aria-expanded":o(t),"aria-controls":o(y),"aria-describedby":o(y),tabindex:w.disabled?-1:0,type:"button",onClick:o(c),onKeydown:X(we(o(d),["stop","prevent"]),["space","enter"]),onFocus:o(p),onBlur:$=>r.value=!1},[z(w.$slots,"title",{},()=>[C(K(w.title),1)]),z(w.$slots,"icon",{isActive:o(t)},()=>[l(o(ne),{class:B(o(S))},{default:a(()=>[(v(),E(Se(w.icon)))]),_:1},8,["class"])])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),l(o(el),null,{default:a(()=>[xe(D("div",{id:o(y),role:"region",class:B(o(F)),"aria-hidden":!o(t),"aria-labelledby":o(f)},[D("div",{class:B(o(N))},[z(w.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[Ee,o(t)]])]),_:3})],2))}});var re=se(pl,[["__file","collapse-item.vue"]]);const ml=he(dl,{CollapseItem:re}),fl=Fe(re),_l={__name:"mappingSelect",props:q({options:{type:Array}},{modelValue:{},modelModifiers:{}}),emits:q(["afterSelect"],["update:modelValue"]),setup(i,{emit:s}){let n=Y(i,"modelValue"),r=i;const e=s,t=()=>{e("afterSelect")};return(p,c)=>{const d=ae,S=te;return v(),E(S,{modelValue:o(n),"onUpdate:modelValue":c[0]||(c[0]=g=>Z(n)?n.value=g:n=g),filterable:"",onChange:t,size:"large",placeholder:"请选择内容",clearable:""},{default:a(()=>[(v(!0),U(G,null,O(o(r).options,g=>(v(),E(d,{key:g.id,label:g.describe,value:g.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}},vl={__name:"fileStatus",props:{status:Boolean},setup(i){let s=i;return(n,r)=>{const e=de;return v(),U("div",null,[l(e,{effect:"dark",content:o(s).status?"文件有效":"文件不存在"},{default:a(()=>[D("div",{class:"status",style:De({backgroundColor:o(s).status?"green":"gray"})},null,4)]),_:1},8,["content"])])}}},yl=j(vl,[["__scopeId","data-v-396160a0"]]),bl={__name:"fileCamelStatus",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(i){let s=Y(i,"modelValue");const n=V([{id:1,name:"原表名"},{id:2,name:"小驼峰表名"},{id:3,name:"大驼峰表名"}]);return(r,e)=>{const t=ae,p=te;return v(),E(p,{modelValue:o(s),"onUpdate:modelValue":e[0]||(e[0]=c=>Z(s)?s.value=c:s=c),placeholder:"选择形式"},{default:a(()=>[(v(!0),U(G,null,O(n.value,c=>(v(),E(t,{key:c.id,label:c.name,value:c.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}},gl={class:"icon-ele"},Cl={class:"myLabel"},Vl={__name:"saveGroupInfo",emits:["afterSave"],setup(i,{expose:s,emit:n}){const r=V(!1),e=V(!1),t=V(0),p=n,c=V([]),d=V({describe:"",genRootDir:"",searchRootDir:"",fileModels:[]}),S=b=>{t.value=b,r.value=!0,b?(e.value=!0,h(b)):(e.value=!1,d.value={fileAndGroups:[]}),g()},g=async()=>{let b=await Ze();c.value=b.data},h=async b=>{let u=await je(b);d.value=u.data},F=async()=>{let b={path:d.value.searchRootDir},u=await He(b);d.value.fileModels=u.data},N=async()=>{let b={id:t.value,path:d.value.searchRootDir},u=await qe(b);d.value.fileModels=u.data},y=async()=>{await Le(d.value),P.success("新增成功"),d.value={fileModels:[]},r.value=!1,p("afterSave")},f=async()=>{await We(t.value,d.value),P.success("更新成功"),d.value={fileModels:[]},r.value=!1,p("afterSave")},w=()=>{r.value=!1},M=()=>{d.value={fileModels:[]}},$=async b=>{d.value.fileModels.splice(d.value.fileModels.indexOf(b),1),await Je(b.id),P.success("删除成功")};return s({open:S}),(b,u)=>{const _=oe,x=Ae,A=ie,H=ne,ce=_l,pe=de,me=fl,fe=ml,_e=Be,ve=Ke;return v(),U("div",null,[l(ve,{title:e.value?"修改":"新增",modelValue:r.value,"onUpdate:modelValue":u[3]||(u[3]=m=>r.value=m)},{footer:a(()=>[l(A,{onClick:w},{default:a(()=>u[7]||(u[7]=[C("取消")])),_:1}),l(A,{onClick:M},{default:a(()=>u[8]||(u[8]=[C("清空")])),_:1}),e.value?(v(),E(A,{key:0,type:"primary",onClick:f},{default:a(()=>u[9]||(u[9]=[C("修改")])),_:1})):(v(),E(A,{key:1,type:"primary",onClick:y},{default:a(()=>u[10]||(u[10]=[C("新增")])),_:1}))]),default:a(()=>[l(_e,{"label-position":"left","label-width":"auto"},{default:a(()=>[l(x,{label:"描述:"},{default:a(()=>[l(_,{clearable:"",modelValue:d.value.describe,"onUpdate:modelValue":u[0]||(u[0]=m=>d.value.describe=m)},null,8,["modelValue"])]),_:1}),l(x,{label:"要生成文件的根目录"},{default:a(()=>[l(_,{modelValue:d.value.rootDir,"onUpdate:modelValue":u[1]||(u[1]=m=>d.value.rootDir=m),clearable:""},null,8,["modelValue"])]),_:1}),l(x,{label:"选择要搜索的根目录"},{default:a(()=>[l(_,{modelValue:d.value.searchRootDir,"onUpdate:modelValue":u[2]||(u[2]=m=>d.value.searchRootDir=m),clearable:""},null,8,["modelValue"]),e.value?(v(),E(A,{key:1,style:{"margin-top":"5px"},type:"danger",onClick:N},{default:a(()=>u[5]||(u[5]=[C("重新搜索")])),_:1})):(v(),E(A,{key:0,style:{"margin-top":"5px"},type:"danger",onClick:F},{default:a(()=>u[4]||(u[4]=[C("确定搜索")])),_:1}))]),_:1}),l(fe,null,{default:a(()=>[(v(!0),U(G,null,O(d.value.fileModels,m=>(v(),E(me,{key:m},{title:a(()=>[D("div",null,K(m.templatePath),1),l(H,{size:20,style:{position:"absolute",right:"80px"}},{default:a(()=>[l(o(Ue),{onClick:k=>$(m)},null,8,["onClick"])]),_:2},1024),l(yl,{style:{"margin-left":"20px"},status:m.templatePathIsExist},null,8,["status"])]),icon:a(({isActive:k})=>[D("span",gl,K(""),1)]),default:a(()=>[l(x,{label:"要生成到的目录"},{default:a(()=>[l(_,{modelValue:m.genPath,"onUpdate:modelValue":k=>m.genPath=k,placeholder:"相对于根目录,比如/go/model"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(x,{label:"名称后缀"},{default:a(()=>[l(_,{clearable:"",style:{width:"150px"},placeholder:"比如_controller",modelValue:m.nameSuffix,"onUpdate:modelValue":k=>m.nameSuffix=k},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(x,{label:"文件后缀"},{default:a(()=>[l(_,{clearable:"",style:{width:"150px"},placeholder:"比如.go",modelValue:m.fileSuffix,"onUpdate:modelValue":k=>m.fileSuffix=k},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(x,{label:"mapping"},{default:a(()=>[l(ce,{options:c.value,modelValue:m.mappingId,"onUpdate:modelValue":k=>m.mappingId=k},null,8,["options","modelValue","onUpdate:modelValue"])]),_:2},1024),l(x,{label:"表名是否驼峰:"},{label:a(()=>[D("div",Cl,[u[6]||(u[6]=C(" 是否驼峰 ")),l(pe,{effect:"dark",content:"原表名user_info,小驼峰userInfo,大驼峰UserInfo"},{default:a(()=>[l(H,null,{default:a(()=>[l(o(Me))]),_:1})]),_:1})])]),default:a(()=>[l(bl,{modelValue:m.isCamelCase,"onUpdate:modelValue":k=>m.isCamelCase=k,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["title","modelValue"])])}}},kl=j(Vl,[["__scopeId","data-v-65140a65"]]),Il={style:{"margin-top":"20px"}},Sl={__name:"groupManager",setup(i){const s=V(null),n=V([]),r=V(0),e=async()=>{let y=await Qe(t.value);n.value=y.data.data,r.value=y.data.total};$e(()=>{e()});const t=V({page:1,size:5,queryStr:""}),p=()=>{s.value.open(0)},c=y=>{s.value.open(y)},d=async y=>{Pe.confirm("确定删除该配置吗？","提示",{type:"warning"}).then(async()=>{let f=await Ye(y);P.success(f.message),await e()}).catch(()=>{console.log("取消删除")})},S=()=>{e()},g=y=>{t.value.size=y,e()},h=y=>{t.value.page=y,e()},F=V(null),N=()=>{e()};return(y,f)=>{const w=oe,M=ie,$=Re,b=Ne,u=ze;return v(),U("div",null,[D("div",Il,[l(w,{style:{width:"250px"},modelValue:t.value.queryStr,"onUpdate:modelValue":f[0]||(f[0]=_=>t.value.queryStr=_),clearable:"",onClear:e,onKeyup:X(e,["enter"]),placeholder:"可根据描述,表名模糊搜索"},null,8,["modelValue"]),l(M,{style:{"margin-left":"20px"},type:"primary",onClick:e},{default:a(()=>f[3]||(f[3]=[C("查询")])),_:1}),l(M,{style:{"margin-left":"20px"},type:"primary",onClick:p},{default:a(()=>f[4]||(f[4]=[C("新增组")])),_:1})]),l(b,{style:{"margin-top":"10px"},data:n.value},{default:a(()=>[l($,{label:"描述"},{default:a(_=>[C(K(_.row.describe),1)]),_:1}),l($,{label:"搜索的目录"},{default:a(_=>[C(K(_.row.searchRootDir),1)]),_:1}),l($,{label:"生成到的根目录"},{default:a(_=>[C(K(_.row.rootDir),1)]),_:1}),l($,{label:"操作"},{default:a(_=>[l(M,{type:"primary",onClick:x=>c(_.row.id)},{default:a(()=>f[5]||(f[5]=[C("修改")])),_:2},1032,["onClick"]),l(M,{type:"danger",onClick:x=>d(_.row.id)},{default:a(()=>f[6]||(f[6]=[C("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(u,{"current-page":t.value.page,"onUpdate:currentPage":f[1]||(f[1]=_=>t.value.page=_),"page-size":t.value.size,"onUpdate:pageSize":f[2]||(f[2]=_=>t.value.size=_),"page-sizes":[1,5,10],layout:"total, sizes, prev, pager, next, jumper",total:r.value,onSizeChange:g,onCurrentChange:h},null,8,["current-page","page-size","total"]),l(kl,{ref_key:"saveGroupRef",ref:s,onAfterSave:S},null,512),l(Xe,{ref_key:"saveFileInfoRef",ref:F,onAfterSaveFile:N},null,512)])}}},Ml=j(Sl,[["__scopeId","data-v-5f8b8fa9"]]);export{Ml as default};
