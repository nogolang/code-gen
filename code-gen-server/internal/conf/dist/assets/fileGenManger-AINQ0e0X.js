import{r as p,y as F,f as N,N as v,D as l,a5 as V,j as n,o as M,$ as r,a0 as f}from"./index-KQr3sQf-.js";import{E as q,d as D,e as A,f as P,g as T}from"./index-B3M88loM.js";import{x as U,y as m,g as $}from"./_plugin-vue_export-helper-Cls8PYOu.js";import{e as j,G as K,S as R,f as h}from"./saveFileGenInfo-D2bpr6Zn.js";import"./databaseApi-CmhCTCoB.js";const H={style:{"margin-top":"20px"}},J={__name:"fileGenManger",setup(L){const d=p(null),c=p([]),y=p(0),s=async()=>{let a=await j(o.value);c.value=a.data.data,y.value=a.data.total};F(()=>{s()});const o=p({page:1,size:5,queryStr:""}),_=()=>{d.value.open(0)},C=a=>{d.value.open(a)},x=async a=>{P.confirm("确定删除该配置吗？","提示",{type:"warning"}).then(async()=>{let e=await h(a);m.success(e.message),await s()}).catch(()=>{console.log("取消删除")})},b=()=>{s()},w=a=>{o.value.size=a,s()},S=a=>{o.value.page=a,s()},g=p([]),z=a=>{g.value=a.map(e=>e.id)},k=async()=>{if(g.value.length===0){m.warning("请选择要生成的文件");return}let a=await K(g.value);m.success(a.message)};return(a,e)=>{const E=q,i=$,u=T,I=D,B=A;return M(),N("div",null,[e[8]||(e[8]=v("p",{style:{color:"red","font-size":"20px"}},"不要直接生成在项目目录",-1)),v("div",H,[l(E,{style:{width:"250px"},modelValue:o.value.queryStr,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.queryStr=t),clearable:"",onClear:s,onKeyup:V(s,["enter"]),placeholder:"可根据描述,表名模糊搜索"},null,8,["modelValue"]),l(i,{style:{"margin-left":"20px"},type:"primary",onClick:s},{default:n(()=>e[3]||(e[3]=[r("查询")])),_:1}),l(i,{style:{"margin-left":"20px"},type:"primary",onClick:_},{default:n(()=>e[4]||(e[4]=[r("新增生成配置")])),_:1}),l(i,{style:{"margin-left":"20px"},type:"primary",onClick:k},{default:n(()=>e[5]||(e[5]=[r("一键生成")])),_:1})]),l(I,{style:{"margin-top":"10px"},data:c.value,onSelectionChange:z},{default:n(()=>[l(u,{type:"selection"}),l(u,{label:"描述"},{default:n(t=>[r(f(t.row.describe),1)]),_:1}),l(u,{label:"数据库"},{default:n(t=>[r(f(t.row.databaseName),1)]),_:1}),l(u,{label:"要生成的表"},{default:n(t=>[r(f(t.row.tableNames),1)]),_:1}),l(u,{label:"操作"},{default:n(t=>[l(i,{type:"primary",onClick:G=>C(t.row.id)},{default:n(()=>e[6]||(e[6]=[r("修改")])),_:2},1032,["onClick"]),l(i,{type:"danger",onClick:G=>x(t.row.id)},{default:n(()=>e[7]||(e[7]=[r("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(B,{"current-page":o.value.page,"onUpdate:currentPage":e[1]||(e[1]=t=>o.value.page=t),"page-size":o.value.size,"onUpdate:pageSize":e[2]||(e[2]=t=>o.value.size=t),"page-sizes":[1,5,10],layout:"total, sizes, prev, pager, next, jumper",total:y.value,onSizeChange:w,onCurrentChange:S},null,8,["current-page","page-size","total"]),l(R,{ref_key:"saveFileGenInfoRef",ref:d,onAfterSave:b},null,512)])}}},Z=U(J,[["__scopeId","data-v-8de607cc"]]);export{Z as default};
