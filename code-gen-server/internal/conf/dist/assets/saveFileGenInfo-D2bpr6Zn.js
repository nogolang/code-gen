import{af as M,ag as k,r as y,o as m,h as V,j as s,f as S,P as x,a4 as D,g as N,ah as w,D as i,$ as F}from"./index-KQr3sQf-.js";import{I as n,G,H as E,E as j,a as H,b as L,c as O}from"./index-B3M88loM.js";import{y as U,x as q,g as J}from"./_plugin-vue_export-helper-Cls8PYOu.js";import{b as K,d as Q}from"./databaseApi-CmhCTCoB.js";const de=e=>n.delete("/group/deleteFileById/"+e),W=e=>n.get("/group/findAllNoPagination",e),ue=e=>n.post("/group/findAll",e),re=e=>n.get("/group/findById/"+e),ie=e=>n.post("/group/findAllDir",e),me=e=>n.post("/group/findAllDirForUpdate",e),pe=(e,o)=>n.post("/group/updateById/"+e,o),ce=(e,o)=>n.get("/group/deleteById/"+e,o),fe=e=>n.post("/group/add",e),_e=e=>n.post("/fileGen/genFiles",e),ve=e=>n.post("/fileGen/findAll",e),X=e=>n.get("/fileGen/findById/"+e),Y=(e,o)=>n.post("/fileGen/updateById/"+e,o),be=(e,o)=>n.get("/fileGen/deleteById/"+e,o),Z=e=>n.post("/fileGen/add",e),h={__name:"databaseSelect",props:{modelValue:{},modelModifiers:{}},emits:M(["afterSelect"],["update:modelValue"]),setup(e,{expose:o,emit:d}){let t=k(e,"modelValue");const _=y([]),p=async()=>{let v=await K();_.value=v.data};p();const r=d,l=()=>{r("afterSelect")};return o({findAll:p}),(v,u)=>{const I=G,c=E;return m(),V(c,{modelValue:N(t),"onUpdate:modelValue":u[0]||(u[0]=b=>w(t)?t.value=b:t=b),filterable:"",onChange:l,size:"large",placeholder:"请选择内容",clearable:""},{default:s(()=>[(m(!0),S(x,null,D(_.value,b=>(m(),V(I,{key:b.id,label:b.describe+"/"+b.dataBaseName,value:b.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}},ee={__name:"databaseTableSelect",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e,{expose:o}){let d=k(e,"modelValue");const t=y([]);return o({findAll:async p=>{let r=await Q(p);if(t.value=r.data,r.data==null){U.warning("无任何可用数据库，请配置");return}}}),(p,r)=>{const l=G,v=E;return m(),V(v,{modelValue:N(d),"onUpdate:modelValue":r[0]||(r[0]=u=>w(d)?d.value=u:d=u),multiple:"",filterable:"",size:"large",placeholder:"可多选",clearable:""},{default:s(()=>[(m(!0),S(x,null,D(t.value,u=>(m(),V(l,{key:u,label:u,value:u},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}},le={__name:"groupSelect",props:{modelValue:{},modelModifiers:{}},emits:M(["afterSelect"],["update:modelValue"]),setup(e,{emit:o}){let d=k(e,"modelValue");const t=y([]);(async()=>{let l=await W();t.value=l.data})();const p=o,r=()=>{p("afterSelect")};return(l,v)=>{const u=G,I=E;return m(),V(I,{modelValue:N(d),"onUpdate:modelValue":v[0]||(v[0]=c=>w(d)?d.value=c:d=c),filterable:"",onChange:r,size:"large",placeholder:"请选择内容",clearable:""},{default:s(()=>[(m(!0),S(x,null,D(t.value,c=>(m(),V(u,{key:c.id,label:c.describe,value:c.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}},ae={__name:"saveFileGenInfo",emits:["afterSave"],setup(e,{expose:o,emit:d}){const t=y(!1),_=y(!1),p=y(0),r=d,l=y({describe:"",dataBaseId:"",tableNames:[],groupId:""}),v=async f=>{p.value=f,t.value=!0,f?(_.value=!0,await u(f),await $()):(_.value=!1,l.value={tableNames:[]})},u=async f=>{let a=await X(f);l.value=a.data},I=async()=>{let f=await Z(l.value);U.success(f.message),l.value={tableNames:[]},t.value=!1,r("afterSave")},c=async()=>{let f=await Y(p.value,l.value);U.success(f.message),l.value={tableNames:[]},t.value=!1,r("afterSave")},b=()=>{t.value=!1},T=()=>{l.value={tableNames:[]}},C=y(null),$=()=>{C.value.findAll(l.value.dataBaseId)};return o({open:v}),(f,a)=>{const P=j,B=H,z=L,A=J,R=O;return m(),S("div",null,[i(R,{title:_.value?"修改":"新增",modelValue:t.value,"onUpdate:modelValue":a[4]||(a[4]=g=>t.value=g)},{footer:s(()=>[i(A,{onClick:b},{default:s(()=>a[5]||(a[5]=[F("取消")])),_:1}),i(A,{onClick:T},{default:s(()=>a[6]||(a[6]=[F("清空")])),_:1}),_.value?(m(),V(A,{key:0,type:"primary",onClick:c},{default:s(()=>a[7]||(a[7]=[F("修改")])),_:1})):(m(),V(A,{key:1,type:"primary",onClick:I},{default:s(()=>a[8]||(a[8]=[F("新增")])),_:1}))]),default:s(()=>[i(z,{"label-position":"left","label-width":"auto"},{default:s(()=>[i(B,{label:"描述:"},{default:s(()=>[i(P,{clearable:"",modelValue:l.value.describe,"onUpdate:modelValue":a[0]||(a[0]=g=>l.value.describe=g)},null,8,["modelValue"])]),_:1}),i(B,{label:"数据库连接"},{default:s(()=>[i(h,{onAfterSelect:$,modelValue:l.value.dataBaseId,"onUpdate:modelValue":a[1]||(a[1]=g=>l.value.dataBaseId=g)},null,8,["modelValue"])]),_:1}),i(B,{label:"要生成的表"},{default:s(()=>[i(ee,{"database-id":l.value.dataBaseId,ref_key:"databaseTableRef",ref:C,modelValue:l.value.tableNamesArr,"onUpdate:modelValue":a[2]||(a[2]=g=>l.value.tableNamesArr=g)},null,8,["database-id","modelValue"])]),_:1}),i(B,{label:"选择组"},{default:s(()=>[i(le,{modelValue:l.value.groupId,"onUpdate:modelValue":a[3]||(a[3]=g=>l.value.groupId=g)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["title","modelValue"])])}}},ge=q(ae,[["__scopeId","data-v-7cef8b69"]]);export{fe as A,de as D,re as F,_e as G,ge as S,pe as U,ie as a,me as b,ue as c,ce as d,ve as e,be as f};
